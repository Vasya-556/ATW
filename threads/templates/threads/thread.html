{% extends 'main/layout.html' %}

{% block title%}{{thread.title}}{% endblock %}

{% block content%}

    <div class="thread">
        <h1>{{thread.title}} by {{thread.author}}</h1>
        {% if user.is_authenticated and user == thread.author %}
            <a href="{% url 'edit_thread' thId=thread.pk %}">Edit Thread</a>
        {% endif %}
        <p>{{thread.full_text|linebreaks}}</p>
        <div class="comment">
            <button id="addCommentButton" onclick="showComment()">Add comment</button><br>
            {% if thread.comments.exists %}
                {% for comment in thread.comments.all %}
                    {% if comment.parent_comment %}
                        <p id="reply">{{ comment.parent_comment }}</p>
                    {% endif %}
                    <p id="author">{{ comment.author }}:</p>
                    <p>{{ comment.text }}</p>
                    <button class="replyButton" onclick="showComment()">Reply</button><br>
                {% endfor %}
            {% else %}
                <p id="Nocomments">No comments</p>
            {% endif %}
            <form action="{% url 'thread' thId=thread.id %}" method="post">
                {% csrf_token %}
                <div id="commentForm" style="display: none;">
                    <textarea id="commentText" cols="162" rows="5"></textarea><br>
                    <button type="submit" id="postCommentButton">Post Comment</button><br>
                </div>
            </form>
        </div>
    </div>

{% endblock%}