{% extends 'main/layout.html' %}

{% block title%}{{thread.title}}{% endblock %}

{% block content%}

    <div class="thread">
        <h1>"{{thread.title}}"</h1>
        <h2>by {{thread.author}} on {{thread.time_create}}</h2>
        {% if user.is_authenticated and user == thread.author %}
            <a href="{% url 'edit_thread' thId=thread.pk %}">Edit Thread</a>
            <p>last edited  {{thread.time_update}}</p>
        {% endif %}
        
        <p>Likes: {{ likes }}</p>
        <p>Dislikes: {{ dislikes }}</p>
        {% if user.is_authenticated %}
            <form method="post" action="{% url 'like_thread' thId=thread.pk %}">
                {% csrf_token %}
                <input type="hidden" name="like_type" value="like">
                <button type="submit" class="like-button">Like</button>
            </form>
            <form method="post" action="{% url 'like_thread' thId=thread.pk %}">
                {% csrf_token %}
                <input type="hidden" name="like_type" value="dislike">
                <button type="submit">Dislike</button>
            </form>
        {% endif %}

        <p>{{thread.full_text|linebreaks}}</p>
        <div class="comment">
            {% include 'threads/comments.html' %}
        </div>
    </div>

{% endblock%}
